<!--
<div class="condition-builder card-body" [formGroup]="group">
  <div formArrayName="conditions" class="d-flex flex-column gap-4">

    <div *ngFor="let condition of ruleConditions.controls; let i = index" [formGroupName]="i" class="card shadow-sm rounded-lg">
      <div class="card-body d-flex flex-column gap-3">
        <app-condition-item [group]="condition"
                            [index]="i"
                            (delete)="removeRuleCondition($event)">
        </app-condition-item>
      </div>
    </div>

    <div *ngIf=" ruleConditions.length === 0" class="alert alert-warning">
      You must define at least one condition.
    </div>

    <div class="text-end">
      <button type="button" class="btn btn-sm btn-outline-primary" (click)="addRuleCondition()">
        <i class="bi bi-plus-lg"></i> Add Condition
      </button>
    </div>

  </div>
</div>
-->

<!-- Trigger Section Header -->
<div class="playbook-trigger-header panel panel-default">
  <div class="panel-body d-flex align-items-center">
    <div class="trigger-icon text-primary">
      <i class="glyphicon glyphicon-flash"></i>
    </div>
    <div class="ml-2">
      <h4 class="panel-title m-0">Flow Trigger</h4>
      <small class="text-muted">These conditions define when this automation should start</small>
    </div>
  </div>
</div>

<!-- Existing Condition Builder Section -->
<div *ngIf="fields && fields.length > 0" class="condition-builder card-body" [formGroup]="group">
  <div formArrayName="conditions" class="d-flex flex-column gap-4">

    <div *ngFor="let condition of ruleConditions.controls; let i = index"
         [formGroupName]="i"
         class="card shadow-sm rounded-lg condition-block">
      <div class="card-body d-flex flex-column gap-3">
        <app-condition-item [group]="getConditionFormControl(condition)"
                            [fields]="fields"
                            [index]="i"
                            (delete)="removeRuleCondition($event)">
        </app-condition-item>
      </div>
    </div>

    <div *ngIf="ruleConditions.hasError('minLengthArray') && ruleConditions.touched" class="text-danger">
      You must define at least one condition.
    </div>

    <div class="text-right">
      <button type="button" class="btn btn-sm btn-outline-primary" (click)="addRuleCondition()">
        <i class="glyphicon glyphicon-plus"></i> Add Condition
      </button>
    </div>

  </div>
</div>


